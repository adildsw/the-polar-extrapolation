import { Component, OnInit, ViewChild } from '@angular/core';

import { fadeInOut, dimmerFadeInOut } from '../animations';

import { ComponentToggleService } from '../component-toggle.service';
import { DataProviderService } from '../data-provider.service';

import { BaseChartDirective } from 'ng2-charts/ng2-charts';

import { Subscription } from 'rxjs';

@Component({
  selector: 'app-factor-sealevel',
  templateUrl: './factor-sealevel.component.html',
  styleUrls: ['./factor-sealevel.component.css'],
  animations: [
    fadeInOut,
    dimmerFadeInOut
  ]
})
export class FactorSealevelComponent implements OnInit {
  @ViewChild(BaseChartDirective) chart: BaseChartDirective;

  stateSubscription: Subscription; //Responsible for updating the state variable
  dataSubscription: Subscription; //Responsible for updating the data array variable
  state: any;

  // LineChart DataSet
  public lineChartData: Array<any> = [{ data: [0.0, 0.53, 0.09, 0.03, 1.04, 2.15, 3.17, 3.95, 4.5, 4.84, 4.99, 4.98, 4.82, 4.76, 4.61, 4.93, 5.04, 5.14, 4.97, 4.63, 4.35, 4.26, 4.24, 4.11, 3.88, 3.61, 3.43, 3.54, 3.7, 3.71, 3.47, 3.22, 3.4, 4.1, 5.14, 6.21, 6.55, 7.13, 7.28, 6.89, 6.38, 6.07, 6.3, 7.19, 8.42, 9.34, 9.6, 9.05, 8.75, 8.12, 7.85, 7.39, 7.4, 7.52, 7.59, 7.6, 7.53, 7.41, 7.27, 7.18, 7.25, 7.17, 7.29, 7.31, 7.37, 7.54, 7.7, 7.7, 7.57, 7.73, 8.49, 9.75, 11.12, 11.95, 12.54, 12.87, 12.53, 12.03, 11.69, 11.87, 11.96, 12.1, 11.99, 11.8, 11.67, 11.71, 11.74, 11.78, 11.83, 11.73, 11.38, 10.8, 10.39, 9.65, 9.4, 9.41, 10.01, 10.37, 10.96, 11.78, 11.66, 12.05, 11.69, 11.35, 11.32, 11.67, 12.21, 12.66, 12.46, 12.26, 11.91, 11.2, 10.73, 11.06, 11.15, 11.72, 12.09, 12.18, 12.11, 12.05, 12.28, 12.63, 13.11, 13.8, 14.4, 14.84, 15.1, 15.34, 15.58, 15.79, 15.82, 15.57, 14.92, 14.26, 13.5, 13.23, 13.47, 14.15, 15.16, 16.22, 16.87, 16.87, 16.34, 15.51, 14.61, 13.97, 13.25, 12.88, 12.72, 12.73, 12.76, 12.78, 12.85, 13.15, 13.63, 14.18, 14.53, 14.89, 15.2, 15.59, 16.16, 16.78, 17.25, 17.56, 17.8, 18.14, 18.55, 19.01, 19.61, 20.11, 20.59, 20.91, 21.11, 21.31, 21.55, 21.37, 21.6, 21.28, 20.81, 20.02, 19.58, 18.9, 18.25, 17.81, 17.66, 17.74, 17.91, 18.05, 18.17, 18.33, 18.58, 18.9, 19.14, 19.45, 19.47, 19.24, 18.75, 17.97, 17.19, 16.24, 15.77, 15.5, 15.23, 14.78, 14.27, 13.53, 13.21, 12.68, 12.48, 12.34, 12.27, 12.17, 12.43, 12.66, 12.8, 12.87, 12.84, 13.07, 13.26, 13.55, 13.75, 14.05, 14.47, 15.2, 16.26, 17.32, 18.25, 18.79, 19.06, 19.12, 19.26, 19.28, 19.22, 19.07, 18.87, 18.63, 18.41, 18.28, 18.45, 18.34, 18.29, 18.11, 17.91, 17.88, 18.25, 18.98, 19.79, 20.38, 20.56, 21.02, 21.18, 21.17, 21.45, 21.71, 22.07, 22.4, 22.63, 22.7, 22.6, 22.35, 22.08, 21.87, 21.6, 21.77, 22.09, 22.37, 22.44, 22.17, 21.7, 21.27, 20.97, 20.83, 20.62, 20.58, 20.34, 20.2, 20.07, 20.02, 20.12, 20.39, 20.73, 21.24, 21.54, 22.16, 22.69, 23.61, 24.14, 24.36, 24.24, 23.72, 23.56, 23.33, 23.31, 23.49, 23.9, 24.11, 24.4, 24.73, 25.22, 25.81, 26.38, 26.8, 26.96, 27.22, 27.34, 27.32, 27.11, 26.74, 26.41, 26.33, 26.6, 27.21, 27.96, 28.55, 28.81, 28.74, 28.57, 28.56, 28.85, 29.43, 30.03, 30.31, 30.09, 29.61, 29.19, 29.01, 28.89, 28.65, 28.29, 27.98, 27.85, 27.92, 28.19, 28.64, 29.16, 29.59, 29.77, 29.67, 29.41, 29.18, 29.06, 28.98, 28.91, 28.82, 28.72, 28.61, 28.51, 28.58, 29.0, 29.78, 30.76, 31.74, 32.53, 32.96, 33.01, 32.77, 32.47, 32.32, 32.43, 32.75, 33.18, 33.49, 33.52, 33.31, 33.0, 32.71, 32.56, 32.59, 32.88, 33.44, 34.07, 34.5, 34.55, 34.29, 34.03, 33.96, 34.08, 34.19, 34.21, 34.12, 34.0, 33.9, 33.76, 33.57, 33.4, 33.34, 33.43, 33.59, 33.73, 33.82, 33.92, 34.13, 34.41, 34.7, 34.93, 35.13, 35.27, 35.25, 35.0, 34.59, 34.3, 34.38, 34.84, 35.5, 36.16, 36.7, 36.94, 36.76, 36.23, 35.69, 35.47, 35.62, 35.97, 36.28, 36.41, 36.22, 35.67, 34.9, 34.14, 33.7, 33.73, 34.23, 34.99, 35.71, 36.12, 36.22, 36.19, 36.28, 36.54, 36.9, 37.18, 37.3, 37.2, 36.94, 36.63, 36.42, 36.42, 36.68, 37.21, 37.87, 38.41, 38.68, 38.75, 38.89, 39.27, 39.85, 40.46, 40.9, 41.03, 40.86, 40.55, 40.27, 40.14, 40.13, 40.21, 40.37, 40.59, 40.82, 41.04, 41.21, 41.32, 41.26, 41.06, 40.78, 40.61, 40.64, 40.87, 41.15, 41.31, 41.28, 41.19, 41.3, 41.79, 42.54, 43.24, 43.65, 43.64, 43.25, 42.62, 41.89, 41.28, 40.9, 40.77, 40.76, 40.77, 40.68, 40.53, 40.37, 40.26, 40.27, 40.46, 40.87, 41.43, 42.03, 42.58, 43.12, 43.64, 44.03, 44.1, 43.83, 43.38, 43.09, 43.17, 43.55, 43.94, 44.11, 44.09, 44.05, 44.11, 44.17, 43.77, 43.57, 43.5, 43.46, 43.36, 43.24, 42.99, 42.9, 43.0, 43.22, 43.46, 43.61, 43.71, 43.83, 43.94, 43.91, 43.73, 43.51, 43.4, 43.45, 43.53, 43.57, 43.46, 43.21, 42.91, 42.66, 42.48, 42.3, 41.99, 41.67, 41.5, 41.57, 41.88, 42.39, 43.11, 43.97, 44.77, 45.21, 45.12, 44.57, 43.92, 43.47, 43.3, 43.24, 43.16, 43.09, 43.11, 43.25, 43.37, 43.34, 43.13, 42.87, 42.85, 43.32, 44.38, 45.82, 47.19, 48.17, 48.64, 48.65, 48.39, 47.98, 47.55, 47.16, 46.86, 46.63, 46.48, 46.42, 46.51, 46.72, 46.99, 47.26, 47.57, 47.93, 48.27, 48.4, 48.25, 47.94, 47.64, 47.45, 47.36, 47.37, 47.53, 47.88, 48.33, 48.77, 49.07, 49.22, 49.24, 49.24, 49.26, 49.31, 49.4, 49.53, 49.68, 49.84, 50.01, 50.29, 50.72, 51.2, 51.64, 52.08, 52.6, 53.2, 53.77, 54.22, 54.54, 54.78, 54.93, 54.91, 54.76, 54.49, 54.19, 53.88, 53.52, 53.08, 52.63, 52.42, 52.64, 53.22, 53.79, 53.94, 53.67, 53.25, 53.05, 53.17, 53.52, 54.06, 54.72, 55.4, 55.95, 56.24, 56.2, 55.85, 55.25, 54.45, 53.54, 52.56, 51.65, 50.92, 50.42, 50.16, 50.08, 50.14, 50.22, 50.15, 49.87, 49.45, 49.06, 48.86, 48.87, 48.99, 49.09, 49.08, 49.01, 48.88, 48.69, 48.43, 48.1, 47.76, 47.53, 47.51, 47.69, 48.09, 48.7, 49.53, 50.48, 51.4, 52.13, 52.54, 52.66, 52.69, 52.87, 53.3, 53.81, 54.19, 54.28, 54.19, 54.15, 54.25, 54.35, 54.27, 54.05, 53.94, 54.14, 54.68, 55.42, 56.24, 57.08, 57.86, 58.48, 58.85, 58.93, 58.78, 58.54, 58.35, 58.33, 58.49, 58.76, 59.1, 59.45, 59.83, 60.28, 60.85, 61.54, 62.32, 63.1, 63.86, 64.5, 64.85, 64.84, 64.58, 64.35, 64.37, 64.68, 65.09, 65.41, 65.53, 65.51, 65.47, 65.56, 65.8, 66.15, 66.52, 66.81, 67.03, 67.18, 67.29, 67.34, 67.35, 67.33, 67.3, 67.23, 67.03, 66.7, 66.31, 65.93, 65.59, 65.2, 64.75, 64.3, 63.98, 63.83, 63.84, 63.96, 64.06, 64.01, 63.74, 63.34, 63.06, 63.03, 63.25, 63.63, 64.08, 64.58, 65.04, 65.38, 65.5, 65.43, 65.25, 65.14, 65.24, 65.54, 65.95, 66.43, 66.98, 67.59, 68.15, 68.5, 68.59, 68.41, 68.0, 67.41, 66.76, 66.2, 65.91, 65.94, 66.26, 66.84, 67.62, 68.45, 69.19, 69.72, 70.01, 70.13, 70.07, 69.87, 69.59, 69.43, 69.49, 69.73, 69.94, 69.9, 69.71, 69.65, 70.01, 70.77, 71.57, 72.15, 72.53, 72.99, 73.7, 74.59, 75.43, 75.98, 76.21, 76.24, 76.24, 76.3, 76.37, 76.35, 76.28, 76.34, 76.72, 77.49, 78.49, 79.51, 80.34, 80.95, 81.34, 81.6, 81.85, 82.16, 82.51, 82.83, 83.07, 83.31, 83.55, 83.72, 83.7, 83.51, 83.22, 82.9, 82.52, 82.15, 82.02, 82.27, 82.85, 83.53, 84.08, 84.43, 84.63, 84.72, 84.67, 84.38, 83.8, 82.99, 82.15, 81.57, 81.44, 81.79, 82.42, 83.01, 83.24, 82.98, 82.28, 81.34, 80.43, 79.84, 79.68, 79.8, 79.9, 79.84, 79.73, 79.88, 80.46, 81.37, 82.34, 83.06, 83.32, 83.1, 82.57, 81.93, 81.32, 80.77, 80.3, 80.03, 80.05, 80.37, 80.93, 81.59, 82.19, 82.59, 82.68, 82.52, 82.22, 81.99, 81.97, 82.17, 82.49, 82.82, 83.13, 83.49, 83.89, 84.29, 84.64, 84.9, 85.07, 85.09, 84.97, 84.86, 84.95, 85.37, 86.05, 86.79, 87.41, 87.76, 87.74, 87.37, 86.84, 86.41, 86.24, 86.24, 86.22, 86.1, 85.87, 85.58, 85.21, 84.81, 84.55, 84.58, 84.92, 85.41, 85.87, 86.15, 86.31, 86.33, 86.17, 85.79, 85.19], "label": "Sea Level change (m) with reference to 1993"}];
  public lineChartLabels: Array<any> = ["1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1993", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1994", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1995", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1996", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1997", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1998", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "1999", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2000", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2001", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2002", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2003", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2004", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2005", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2006", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2007", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2008", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2009", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2010", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2011", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2012", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2013", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2014", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2015", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2016", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2017", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018", "2018"];

  serverData = [];
  chartData: Array<any> = [{"data":[], "label":null}];
  chartAxis: Array<any> = [];

  constructor(private componentToggleService: ComponentToggleService, private dataProviderService: DataProviderService) { }

  ngOnInit() {
    this.stateSubscription = this.componentToggleService.getSeaLevelState().subscribe(state => this.state = state);
  }

  toggleSeaLevel() {
    this.componentToggleService.setSeaLevelState('out');
  }

  //LineChart Properties
  public lineChartOptions: any = { responsive: true, maintainAspectRatio: false };
  public lineChartColors: Array<any> = [
    { // grey
      backgroundColor: 'rgba(148,159,177,0.2)',
      borderColor: 'rgba(148,159,177,1)',
      //pointBackgroundColor: 'rgba(148,159,177,1)',
      pointBackgroundColor: 'rgba(34,34,34,0.8)',
      pointBorderColor: '#fff',
      pointHoverBackgroundColor: '#fff',
      pointHoverBorderColor: 'rgba(148,159,177,0.8)'
    },
    { // dark grey
      backgroundColor: 'rgba(77,83,96,0.2)',
      borderColor: 'rgba(77,83,96,1)',
      pointBackgroundColor: 'rgba(77,83,96,1)',
      pointBorderColor: '#fff',
      pointHoverBackgroundColor: '#fff',
      pointHoverBorderColor: 'rgba(77,83,96,1)'
    }
  ];
  public lineChartLegend: boolean = true;
  public lineChartType: string = 'line';
}
 